(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},55706,86031,41818,81583,e=>{"use strict";e.s(["Line",()=>ev,"computeLinePoints",()=>ey],55706);var t=e.i(71645),a=e.i(7670),r=e.i(97865),n=e.i(69212),s=e.i(73393),i=e.i(57999),l=e.i(94395);function o(){return(o=Object.assign.bind()).apply(null,arguments)}var c=e=>{var{cx:r,cy:n,r:c,className:d}=e,u=(0,a.clsx)("recharts-dot",d);return(0,l.isNumber)(r)&&(0,l.isNumber)(n)&&(0,l.isNumber)(c)?t.createElement("circle",o({},(0,i.svgPropertiesNoEvents)(e),(0,s.adaptEventHandlers)(e),{className:u,cx:r,cy:n,r:c})):null},d=e.i(81977),u=e.i(43404),m=e.i(29601),p=e.i(18457),h=["points"];function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function y(){return(y=Object.assign.bind()).apply(null,arguments)}function v(e){var{option:r,dotProps:n,className:s}=e;if((0,t.isValidElement)(r))return(0,t.cloneElement)(r,n);if("function"==typeof r)return r(n);var i=(0,a.clsx)(s,"boolean"!=typeof r?r.className:""),l=null!=n?n:{},{points:o}=l,d=function(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(l,h);return t.createElement(c,y({},d,{className:i}))}function g(e){var{points:a,dot:n,className:s,dotClassName:i,dataKey:l,baseProps:o,needClip:c,clipPathId:h,zIndex:x=p.DefaultZIndexes.scatter}=e;if(null==a||!n&&1!==a.length)return null;var g=(0,d.isClipDot)(n),b=(0,u.svgPropertiesAndEventsFromUnknown)(n),j=a.map((e,r)=>{var s,c,d=f(f(f({r:3},o),b),{},{index:r,cx:null!=(s=e.x)?s:void 0,cy:null!=(c=e.y)?c:void 0,dataKey:l,value:e.value,payload:e.payload,points:a});return t.createElement(v,{key:"dot-".concat(r),option:n,dotProps:d,className:i})}),N={};return c&&null!=h&&(N.clipPath="url(#clipPath-".concat(g?"":"dots-").concat(h,")")),t.createElement(m.ZIndexLayer,{zIndex:x},t.createElement(r.Layer,y({className:s},N),j))}e.s(["Dots",()=>g],86031);var b=e.i(79812),j=e.i(27241),N=e.i(76735),k=e.i(52734);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var E=e=>{var a,{point:n,childIndex:l,mainColor:o,activeDot:d,dataKey:u,clipPath:m}=e;if(!1===d||null==n.x||null==n.y)return null;var p=P(P(P({},{index:l,dataKey:u,cx:n.x,cy:n.y,r:4,fill:null!=o?o:"none",strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value}),(0,i.svgPropertiesNoEventsFromUnknown)(d)),(0,s.adaptEventHandlers)(d));return a=(0,t.isValidElement)(d)?(0,t.cloneElement)(d,p):"function"==typeof d?d(p):t.createElement(c,p),t.createElement(r.Layer,{className:"recharts-active-dot",clipPath:m},a)};function A(e){var{points:a,mainColor:r,activeDot:n,itemDataKey:s,clipPath:i,zIndex:o=p.DefaultZIndexes.activeDot}=e,c=(0,j.useAppSelector)(N.selectActiveTooltipIndex),d=(0,k.useActiveTooltipDataPoints)();if(null==a||null==d)return null;var u=a.find(e=>d.includes(e.payload));return(0,l.isNullish)(u)?null:t.createElement(m.ZIndexLayer,{zIndex:o},t.createElement(E,{point:u,childIndex:Number(c),mainColor:r,dataKey:s,activeDot:n,clipPath:i}))}e.s(["ActivePoints",()=>A],41818);var O=e.i(844),S=e.i(45542),I=e.i(59798),D=e.i(46710),C=e.i(75337),R=e.i(61849),T=e.i(92860),M=e.i(61764),L=(e,t,a,r)=>(0,M.selectAxisWithScale)(e,"xAxis",t,r),B=(e,t,a,r)=>(0,M.selectTicksOfGraphicalItem)(e,"xAxis",t,r),F=(e,t,a,r)=>(0,M.selectAxisWithScale)(e,"yAxis",a,r),K=(e,t,a,r)=>(0,M.selectTicksOfGraphicalItem)(e,"yAxis",a,r),W=(0,R.createSelector)([D.selectChartLayout,L,F,B,K],(e,t,a,r,n)=>(0,b.isCategoricalAxis)(e,"xAxis")?(0,b.getBandSizeOfAxis)(t,r,!1):(0,b.getBandSizeOfAxis)(a,n,!1));function $(e){return"line"===e.type}var G=(0,R.createSelector)([M.selectUnfilteredCartesianItems,(e,t,a,r,n)=>n],(e,t)=>e.filter($).find(e=>e.id===t)),z=(0,R.createSelector)([D.selectChartLayout,L,F,B,K,G,W,T.selectChartDataWithIndexesIfNotInPanorama],(e,t,a,r,n,s,i,l)=>{var o,{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(null!=s&&null!=t&&null!=a&&null!=r&&null!=n&&0!==r.length&&0!==n.length&&null!=i&&("horizontal"===e||"vertical"===e)){var{dataKey:m,data:p}=s;if(null!=(o=null!=p&&p.length>0?p:null==c?void 0:c.slice(d,u+1)))return ey({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataKey:m,bandSize:i,displayedData:o})}}),_=e.i(95146),H=e.i(40657),q=e.i(51883),V=e.i(15549),U=e.i(91187),Y=e.i(66576);function J(e){var t=(0,i.svgPropertiesNoEventsFromUnknown)(e);if(null!=t){var{r:a,strokeWidth:r}=t,n=Number(a),s=Number(r);return(Number.isNaN(n)||n<0)&&(n=3),(Number.isNaN(s)||s<0)&&(s=2),{r:n,strokeWidth:s}}return{r:3,strokeWidth:2}}e.s(["getRadiusAndStrokeWidthFromDot",()=>J],81583);var Z=e.i(18519),Q=e.i(20135),X=["id"],ee=["type","layout","connectNulls","needClip","shape"],et=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ea(){return(ea=Object.assign.bind()).apply(null,arguments)}function er(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function en(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?er(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):er(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function es(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var ei=t.memo(e=>{var{dataKey:a,data:r,stroke:n,strokeWidth:s,fill:i,name:l,hide:o,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:a,nameKey:void 0,name:(0,b.getTooltipNameProp)(l,a),hide:o,type:d,color:n,unit:c}};return t.createElement(O.SetTooltipEntrySettings,{tooltipEntrySettings:u})}),el=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function eo(e){var{clipPathId:a,points:r,props:n}=e,{dot:s,dataKey:l,needClip:o}=n,{id:c}=n,d=es(n,X),u=(0,i.svgPropertiesNoEvents)(d);return t.createElement(g,{points:r,dot:s,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:l,baseProps:u,needClip:o,clipPathId:a})}function ec(e){var{showLabels:a,children:r,points:s}=e,i=(0,t.useMemo)(()=>null==s?void 0:s.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return en(en({},r),{},{value:e.value,payload:e.payload,viewBox:r,parentViewBox:void 0,fill:void 0})}),[s]);return t.createElement(n.CartesianLabelListContextProvider,{value:a?i:void 0},r)}function ed(e){var{clipPathId:a,pathRef:r,points:n,strokeDasharray:s,props:i}=e,{type:l,layout:o,connectNulls:c,needClip:d,shape:m}=i,p=es(i,ee),h=en(en({},(0,u.svgPropertiesAndEvents)(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(a,")"):void 0,points:n,type:l,layout:o,connectNulls:c,strokeDasharray:null!=s?s:i.strokeDasharray});return t.createElement(t.Fragment,null,(null==n?void 0:n.length)>1&&t.createElement(Z.Shape,ea({shapeType:"curve",option:m},h,{pathRef:r})),t.createElement(eo,{points:n,clipPathId:a,props:i}))}function eu(e){var{clipPathId:a,props:r,pathRef:s,previousPointsRef:i,longestAnimatedLengthRef:o}=e,{points:c,strokeDasharray:d,isAnimationActive:u,animationBegin:m,animationDuration:p,animationEasing:h,animateNewValues:x,width:f,height:y,onAnimationEnd:v,onAnimationStart:g}=r,b=i.current,j=(0,H.useAnimationId)(c,"recharts-line-"),N=(0,t.useRef)(j),[k,w]=(0,t.useState)(!1),P=(0,t.useCallback)(()=>{"function"==typeof v&&v(),w(!1)},[v]),E=(0,t.useCallback)(()=>{"function"==typeof g&&g(),w(!0)},[g]),A=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(s.current),O=(0,t.useRef)(0);N.current!==j&&(O.current=o.current,N.current=j);var S=O.current;return t.createElement(ec,{points:c,showLabels:!k},r.children,t.createElement(Y.JavascriptAnimate,{animationId:j,begin:m,duration:p,isActive:u,easing:h,onAnimationEnd:P,onAnimationStart:E,key:j},e=>{var n,m=Math.min((0,l.interpolate)(S,A+S,e),A);if(n=u?d?((e,t,a)=>{var r=a.reduce((e,t)=>e+t);if(!r)return el(t,e);for(var n=Math.floor(e/r),s=e%r,i=t-e,l=[],o=0,c=0;o<a.length;c+=a[o],++o)if(c+a[o]>s){l=[...a.slice(0,o),s-c];break}var d=l.length%2==0?[0,i]:[i];return[...function(e,t){for(var a=e.length%2!=0?[...e,0]:e,r=[],n=0;n<t;++n)r=[...r,...a];return r}(a,n),...l,...d].map(e=>"".concat(e,"px")).join(", ")})(m,A,"".concat(d).split(/[,\s]+/gim).map(e=>parseFloat(e))):el(A,m):null==d?void 0:String(d),e>0&&A>0&&(i.current=c,o.current=Math.max(o.current,m)),b){var p=b.length/c.length,h=1===e?c:c.map((t,a)=>{var r=Math.floor(a*p);if(b[r]){var n=b[r];return en(en({},t),{},{x:(0,l.interpolate)(n.x,t.x,e),y:(0,l.interpolate)(n.y,t.y,e)})}return x?en(en({},t),{},{x:(0,l.interpolate)(2*f,t.x,e),y:(0,l.interpolate)(y/2,t.y,e)}):en(en({},t),{},{x:t.x,y:t.y})});return i.current=h,t.createElement(ed,{props:r,points:h,clipPathId:a,pathRef:s,strokeDasharray:n})}return t.createElement(ed,{props:r,points:c,clipPathId:a,pathRef:s,strokeDasharray:n})}),t.createElement(n.LabelListFromLabelProp,{label:r.label}))}function em(e){var{clipPathId:a,props:r}=e,n=(0,t.useRef)(null),s=(0,t.useRef)(0),i=(0,t.useRef)(null);return t.createElement(eu,{props:r,clipPathId:a,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:i})}var ep=(e,t)=>{var a,r;return{x:null!=(a=e.x)?a:void 0,y:null!=(r=e.y)?r:void 0,value:e.value,errorVal:(0,b.getValueByDataKey)(e.payload,t)}};class eh extends t.Component{render(){var{hide:e,dot:n,points:s,className:i,xAxisId:l,yAxisId:o,top:c,left:u,width:p,height:h,id:x,needClip:f,zIndex:y}=this.props;if(e)return null;var v=(0,a.clsx)("recharts-line",i),{r:g,strokeWidth:b}=J(n),j=(0,d.isClipDot)(n),N=2*g+b,k=f?"url(#clipPath-".concat(j?"":"dots-").concat(x,")"):void 0;return t.createElement(m.ZIndexLayer,{zIndex:y},t.createElement(r.Layer,{className:v},f&&t.createElement("defs",null,t.createElement(I.GraphicalItemClipPath,{clipPathId:x,xAxisId:l,yAxisId:o}),!j&&t.createElement("clipPath",{id:"clipPath-dots-".concat(x)},t.createElement("rect",{x:u-N/2,y:c-N/2,width:p+N,height:h+N}))),t.createElement(S.SetErrorBarContext,{xAxisId:l,yAxisId:o,data:s,dataPointFormatter:ep,errorBarOffset:0},t.createElement(em,{props:this.props,clipPathId:x}))),t.createElement(A,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var ex={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:p.DefaultZIndexes.line,type:"linear"};function ef(e){var a=(0,q.resolveDefaultProps)(e,ex),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:l,connectNulls:o,dot:c,hide:d,isAnimationActive:u,label:m,legendType:p,xAxisId:h,yAxisId:x,id:f}=a,y=es(a,et),{needClip:v}=(0,I.useNeedsClip)(h,x),g=(0,k.usePlotArea)(),b=(0,D.useChartLayout)(),N=(0,C.useIsPanorama)(),w=(0,j.useAppSelector)(e=>z(e,h,x,N,f));if("horizontal"!==b&&"vertical"!==b||null==w||null==g)return null;var{height:P,width:E,x:A,y:O}=g;return t.createElement(eh,ea({},y,{id:f,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:l,isAnimationActive:u,hide:d,label:m,legendType:p,xAxisId:h,yAxisId:x,points:w,layout:b,height:P,width:E,left:A,top:O,needClip:v}))}function ey(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:i,bandSize:o,displayedData:c}=e;return c.map((e,c)=>{var d=(0,b.getValueByDataKey)(e,i);if("horizontal"===t)return{x:(0,b.getCateCoordinateOfLine)({axis:a,ticks:n,bandSize:o,entry:e,index:c}),y:(0,l.isNullish)(d)?null:r.scale(d),value:d,payload:e};var u=(0,l.isNullish)(d)?null:a.scale(d),m=(0,b.getCateCoordinateOfLine)({axis:r,ticks:s,bandSize:o,entry:e,index:c});return null==u||null==m?null:{x:u,y:m,value:d,payload:e}}).filter(Boolean)}var ev=t.memo(function(e){var a=(0,q.resolveDefaultProps)(e,ex),r=(0,C.useIsPanorama)();return t.createElement(V.RegisterGraphicalItemId,{id:a.id,type:"line"},e=>t.createElement(t.Fragment,null,t.createElement(_.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,legendType:n,hide:s}=e;return[{inactive:s,dataKey:t,type:n,color:r,value:(0,b.getTooltipNameProp)(a,t),payload:e}]})(a)}),t.createElement(ei,{dataKey:a.dataKey,data:a.data,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType}),t.createElement(U.SetCartesianGraphicalItem,{type:"line",id:e,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,hide:a.hide,isPanorama:r}),t.createElement(ef,ea({},a,{id:e}))))},Q.propsAreEqual);ev.displayName="Line"},21417,e=>{"use strict";var t=e.i(71645),a=e.i(25949),r=e.i(33369),n=["axis"],s=(0,t.forwardRef)((e,s)=>t.createElement(r.CartesianChart,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:n,tooltipPayloadSearcher:a.arrayTooltipSearcher,categoricalChartProps:e,ref:s}));e.s(["ComposedChart",()=>s])},12426,e=>{"use strict";let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},9694,e=>{"use strict";var t=e.i(71645),a=e.i(25949),r=e.i(33369),n=["axis","item"],s=(0,t.forwardRef)((e,s)=>t.createElement(r.CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:n,tooltipPayloadSearcher:a.arrayTooltipSearcher,categoricalChartProps:e,ref:s}));e.s(["BarChart",()=>s])},70273,e=>{"use strict";let t=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>t],70273)},57086,e=>{"use strict";let t=(0,e.i(75254).default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);e.s(["Percent",()=>t],57086)},30699,e=>{"use strict";let t=(0,e.i(75254).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>t],30699)},237,e=>{"use strict";e.s(["Area",()=>ed,"computeArea",()=>ec],237);var t=e.i(71645),a=e.i(7670),r=e.i(72733),n=e.i(97865),s=e.i(69212),i=e.i(86031),l=e.i(62728),o=e.i(94395),c=e.i(79812),d=e.i(81977),u=e.i(41818),m=e.i(844),p=e.i(59798),h=e.i(61849),x=e.i(61764),f=e.i(46710),y=e.i(92860),v=e.i(91526),g=e.i(77320),b=(e,t,a,r)=>(0,x.selectAxisWithScale)(e,"xAxis",t,r),j=(e,t,a,r)=>(0,x.selectTicksOfGraphicalItem)(e,"xAxis",t,r),N=(e,t,a,r)=>(0,x.selectAxisWithScale)(e,"yAxis",a,r),k=(e,t,a,r)=>(0,x.selectTicksOfGraphicalItem)(e,"yAxis",a,r),w=(0,h.createSelector)([f.selectChartLayout,b,N,j,k],(e,t,a,r,n)=>(0,c.isCategoricalAxis)(e,"xAxis")?(0,c.getBandSizeOfAxis)(t,r,!1):(0,c.getBandSizeOfAxis)(a,n,!1)),P=(0,h.createSelector)([x.selectUnfilteredCartesianItems,(e,t,a,r,n)=>n],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),E=(0,h.createSelector)([f.selectChartLayout,b,N,j,k,(e,t,a,r,n)=>{var s,i,l=P(e,t,a,r,n);if(null!=l){var o=(0,f.selectChartLayout)(e);if(null!=(i=(0,c.isCategoricalAxis)(o,"xAxis")?(0,x.selectStackGroups)(e,"yAxis",a,r):(0,x.selectStackGroups)(e,"xAxis",t,r))){var{stackId:d}=l,u=(0,v.getStackSeriesIdentifier)(l);if(null!=d&&null!=u){var m=null==(s=i[d])?void 0:s.stackedData;return null==m?void 0:m.find(e=>e.key===u)}}}},y.selectChartDataWithIndexesIfNotInPanorama,w,P,g.selectChartBaseValue],(e,t,a,r,n,s,i,l,o,c)=>{var d,{chartData:u,dataStartIndex:m,dataEndIndex:p}=i;if(null!=o&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=a&&null!=r&&null!=n&&0!==r.length&&0!==n.length&&null!=l){var{data:h}=o;if(null!=(d=h&&h.length>0?h:null==u?void 0:u.slice(m,p+1)))return ec({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataStartIndex:m,areaSettings:o,stackedData:s,displayedData:d,chartBaseValue:c,bandSize:l})}}),A=e.i(75337),O=e.i(75502),S=e.i(95146),I=e.i(27241),D=e.i(40657),C=e.i(51883),R=e.i(22075),T=e.i(52734),M=e.i(15549),L=e.i(91187),B=e.i(57999),F=e.i(66576),K=e.i(81583),W=e.i(43404),$=e.i(29601),G=e.i(18457),z=e.i(20135),_=["id"],H=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function q(){return(q=Object.assign.bind()).apply(null,arguments)}function V(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach(function(t){var r,n,s;r=e,n=t,s=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function J(e,t){return e&&"none"!==e?e:t}var Z=t.memo(e=>{var{dataKey:a,data:r,stroke:n,strokeWidth:s,fill:i,name:l,hide:o,unit:d,tooltipType:u}=e,p={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:a,nameKey:void 0,name:(0,c.getTooltipNameProp)(l,a),hide:o,type:u,color:J(n,i),unit:d}};return t.createElement(m.SetTooltipEntrySettings,{tooltipEntrySettings:p})});function Q(e){var{clipPathId:a,points:r,props:n}=e,{needClip:s,dot:l,dataKey:o}=n,c=(0,B.svgPropertiesNoEvents)(n);return t.createElement(i.Dots,{points:r,dot:l,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:c,needClip:s,clipPathId:a})}function X(e){var{showLabels:a,children:r,points:n}=e,i=n.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Y(Y({},r),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:r,fill:void 0})});return t.createElement(s.CartesianLabelListContextProvider,{value:a?i:void 0},r)}function ee(e){var{points:a,baseLine:s,needClip:i,clipPathId:l,props:o}=e,{layout:c,type:d,stroke:u,connectNulls:m,isRange:p}=o,{id:h}=o,x=V(o,_),f=(0,B.svgPropertiesNoEvents)(x),y=(0,W.svgPropertiesAndEvents)(x);return t.createElement(t.Fragment,null,(null==a?void 0:a.length)>1&&t.createElement(n.Layer,{clipPath:i?"url(#clipPath-".concat(l,")"):void 0},t.createElement(r.Curve,q({},y,{id:h,points:a,connectNulls:m,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),"none"!==u&&t.createElement(r.Curve,q({},f,{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:a})),"none"!==u&&p&&t.createElement(r.Curve,q({},f,{className:"recharts-area-curve",layout:c,type:d,connectNulls:m,fill:"none",points:s}))),t.createElement(Q,{points:a,props:x,clipPathId:l}))}function et(e){var{alpha:a,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].y,l=n[n.length-1].y;if(!(0,R.isWellBehavedNumber)(i)||!(0,R.isWellBehavedNumber)(l))return null;var c=a*Math.abs(i-l),d=Math.max(...n.map(e=>e.x||0));return((0,o.isNumber)(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(e=>e.x||0),d)),(0,o.isNumber)(d))?t.createElement("rect",{x:0,y:i<l?i:i-c,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}function ea(e){var{alpha:a,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].x,l=n[n.length-1].x;if(!(0,R.isWellBehavedNumber)(i)||!(0,R.isWellBehavedNumber)(l))return null;var c=a*Math.abs(i-l),d=Math.max(...n.map(e=>e.y||0));return((0,o.isNumber)(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(e=>e.y||0),d)),(0,o.isNumber)(d))?t.createElement("rect",{x:i<l?i:i-c,y:0,width:c,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}function er(e){var{alpha:a,layout:r,points:n,baseLine:s,strokeWidth:i}=e;return"vertical"===r?t.createElement(et,{alpha:a,points:n,baseLine:s,strokeWidth:i}):t.createElement(ea,{alpha:a,points:n,baseLine:s,strokeWidth:i})}function en(e){var{needClip:a,clipPathId:r,props:i,previousPointsRef:l,previousBaselineRef:c}=e,{points:d,baseLine:u,isAnimationActive:m,animationBegin:p,animationDuration:h,animationEasing:x,onAnimationStart:y,onAnimationEnd:v}=i,g=(0,t.useMemo)(()=>({points:d,baseLine:u}),[d,u]),b=(0,D.useAnimationId)(g,"recharts-area-"),j=(0,f.useCartesianChartLayout)(),[N,k]=(0,t.useState)(!1),w=(0,t.useCallback)(()=>{"function"==typeof v&&v(),k(!1)},[v]),P=(0,t.useCallback)(()=>{"function"==typeof y&&y(),k(!0)},[y]);if(null==j)return null;var E=l.current,A=c.current;return t.createElement(X,{showLabels:!N,points:d},i.children,t.createElement(F.JavascriptAnimate,{animationId:b,begin:p,duration:h,isActive:m,easing:x,onAnimationEnd:w,onAnimationStart:P,key:b},e=>{if(E){var s,p=E.length/d.length,h=1===e?d:d.map((t,a)=>{var r=Math.floor(a*p);if(E[r]){var n=E[r];return Y(Y({},t),{},{x:(0,o.interpolate)(n.x,t.x,e),y:(0,o.interpolate)(n.y,t.y,e)})}return t});return s=(0,o.isNumber)(u)?(0,o.interpolate)(A,u,e):(0,o.isNullish)(u)||(0,o.isNan)(u)?(0,o.interpolate)(A,0,e):u.map((t,a)=>{var r=Math.floor(a*p);if(Array.isArray(A)&&A[r]){var n=A[r];return Y(Y({},t),{},{x:(0,o.interpolate)(n.x,t.x,e),y:(0,o.interpolate)(n.y,t.y,e)})}return t}),e>0&&(l.current=h,c.current=s),t.createElement(ee,{points:h,baseLine:s,needClip:a,clipPathId:r,props:i})}return e>0&&(l.current=d,c.current=u),t.createElement(n.Layer,null,m&&t.createElement("defs",null,t.createElement("clipPath",{id:"animationClipPath-".concat(r)},t.createElement(er,{alpha:e,points:d,baseLine:u,layout:j,strokeWidth:i.strokeWidth}))),t.createElement(n.Layer,{clipPath:"url(#animationClipPath-".concat(r,")")},t.createElement(ee,{points:d,baseLine:u,needClip:a,clipPathId:r,props:i})))}),t.createElement(s.LabelListFromLabelProp,{label:i.label}))}function es(e){var{needClip:a,clipPathId:r,props:n}=e,s=(0,t.useRef)(null),i=(0,t.useRef)();return t.createElement(en,{needClip:a,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i})}class ei extends t.PureComponent{render(){var{hide:e,dot:r,points:s,className:i,top:l,left:o,needClip:c,xAxisId:m,yAxisId:h,width:x,height:f,id:y,baseLine:v,zIndex:g}=this.props;if(e)return null;var b=(0,a.clsx)("recharts-area",i),{r:j,strokeWidth:N}=(0,K.getRadiusAndStrokeWidthFromDot)(r),k=(0,d.isClipDot)(r),w=2*j+N,P=c?"url(#clipPath-".concat(k?"":"dots-").concat(y,")"):void 0;return t.createElement($.ZIndexLayer,{zIndex:g},t.createElement(n.Layer,{className:b},c&&t.createElement("defs",null,t.createElement(p.GraphicalItemClipPath,{clipPathId:y,xAxisId:m,yAxisId:h}),!k&&t.createElement("clipPath",{id:"clipPath-dots-".concat(y)},t.createElement("rect",{x:o-w/2,y:l-w/2,width:x+w,height:f+w}))),t.createElement(es,{needClip:c,clipPathId:y,props:this.props})),t.createElement(u.ActivePoints,{points:s,mainColor:J(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}),this.props.isRange&&Array.isArray(v)&&t.createElement(u.ActivePoints,{points:v,mainColor:J(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:P}))}}var el={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:G.DefaultZIndexes.area};function eo(e){var a,r=(0,C.resolveDefaultProps)(e,el),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:c,dot:d,fill:u,fillOpacity:m,hide:h,isAnimationActive:x,legendType:y,stroke:v,xAxisId:g,yAxisId:b}=r,j=V(r,H),N=(0,f.useChartLayout)(),k=(0,O.useChartName)(),{needClip:w}=(0,p.useNeedsClip)(g,b),P=(0,A.useIsPanorama)(),{points:S,isRange:D,baseLine:R}=null!=(a=(0,I.useAppSelector)(t=>E(t,g,b,P,e.id)))?a:{},M=(0,T.usePlotArea)();if("horizontal"!==N&&"vertical"!==N||null==M||"AreaChart"!==k&&"ComposedChart"!==k)return null;var{height:L,width:B,x:F,y:K}=M;return S&&S.length?t.createElement(ei,q({},j,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:R,connectNulls:c,dot:d,fill:u,fillOpacity:m,height:L,hide:h,layout:N,isAnimationActive:"auto"===x?!l.Global.isSsr:x,isRange:D,legendType:y,needClip:w,points:S,stroke:v,width:B,left:F,top:K,xAxisId:g,yAxisId:b})):null}function ec(e){var t,{areaSettings:{connectNulls:a,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:l,xAxis:d,yAxis:u,displayedData:m,dataStartIndex:p,xAxisTicks:h,yAxisTicks:x,bandSize:f}=e,y=s&&s.length,v=((e,t,a,r,n)=>{var s=null!=a?a:t;if((0,o.isNumber)(s))return s;var i="horizontal"===e?n:r,l=i.scale.domain();if("number"===i.type){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return"dataMin"===s?d:"dataMax"===s||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===s?l[0]:"dataMax"===s?l[1]:l[0]})(i,l,r,d,u),g="horizontal"===i,b=!1,j=m.map((e,t)=>{y?r=s[p+t]:Array.isArray(r=(0,c.getValueByDataKey)(e,n))?b=!0:r=[v,r];var r,i=null==r[1]||y&&!a&&null==(0,c.getValueByDataKey)(e,n);return g?{x:(0,c.getCateCoordinateOfLine)({axis:d,ticks:h,bandSize:f,entry:e,index:t}),y:i?null:u.scale(r[1]),value:r,payload:e}:{x:i?null:d.scale(r[1]),y:(0,c.getCateCoordinateOfLine)({axis:u,ticks:x,bandSize:f,entry:e,index:t}),value:r,payload:e}});return t=y||b?j.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return g?{x:e.x,y:null!=t&&null!=e.y?u.scale(t):null,payload:e.payload}:{x:null!=t?d.scale(t):null,y:e.y,payload:e.payload}}):g?u.scale(v):d.scale(v),{points:j,baseLine:t,isRange:b}}var ed=t.memo(function(e){var a=(0,C.resolveDefaultProps)(e,el),r=(0,A.useIsPanorama)();return t.createElement(M.RegisterGraphicalItemId,{id:a.id,type:"area"},e=>t.createElement(t.Fragment,null,t.createElement(S.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:J(r,n),value:(0,c.getTooltipNameProp)(a,t),payload:e}]})(a)}),t.createElement(Z,{dataKey:a.dataKey,data:a.data,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType}),t.createElement(L.SetCartesianGraphicalItem,{type:"area",id:e,data:a.data,dataKey:a.dataKey,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,stackId:(0,c.getNormalizedStackId)(a.stackId),hide:a.hide,barSize:void 0,baseValue:a.baseValue,isPanorama:r,connectNulls:a.connectNulls}),t.createElement(eo,q({},a,{id:e}))))},z.propsAreEqual);ed.displayName="Area"},1725,e=>{"use strict";var t=e.i(71645),a=e.i(25949),r=e.i(33369),n=["axis"],s=(0,t.forwardRef)((e,s)=>t.createElement(r.CartesianChart,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:n,tooltipPayloadSearcher:a.arrayTooltipSearcher,categoricalChartProps:e,ref:s}));e.s(["AreaChart",()=>s])},82831,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),n=e.i(11795),s=e.i(44674),i=e.i(12426),l=e.i(3116),o=e.i(66270),c=e.i(7486),d=e.i(75254);let u=(0,d.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var m=e.i(87316),p=e.i(25652),h=e.i(57086),x=e.i(30699);let f=(0,d.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.i(70273);var y=e.i(55706),v=e.i(85183),g=e.i(93230),b=e.i(72526),j=e.i(34239),N=e.i(31195),k=e.i(59559),w=e.i(21417),P=e.i(75225);e.i(237),e.i(1725);var E=e.i(9694);function A(){let e,d=(0,r.useRouter)(),A=(0,n.createClient)(),{language:O}=(0,s.useLanguage)(),[S,I]=(0,a.useState)(!0),[D,C]=(0,a.useState)(null),[R,T]=(0,a.useState)([]),[M,L]=(0,a.useState)("daily"),[B,F]=(0,a.useState)([]),[K,W]=(0,a.useState)(0),[$,G]=(0,a.useState)({revenue:0,orders:0,avgOrder:0,cashRevenue:0,qrisRevenue:0,transferRevenue:0,peakHour:"-",topTable:0}),[z,_]=(0,a.useState)([]),[H,q]=(0,a.useState)([]),[V,U]=(0,a.useState)([]),[Y,J]=(0,a.useState)(!1),[Z,Q]=(0,a.useState)([]),[X,ee]=(0,a.useState)([]),[et,ea]=(0,a.useState)([]),[er,en]=(0,a.useState)([]);async function es(){if(D&&0!==B.length){I(!0);try{let e=B[K];console.log("ðŸ“… Fetching analytics:",{restaurant:D.name,period:e.fullLabel,start:e.start.toISOString(),end:e.end.toISOString()});let{data:t}=await A.from("orders").select("*, order_items(*), tables(number)").eq("restaurant_id",D.id).eq("payment_status","paid").gte("paid_at",e.start.toISOString()).lte("paid_at",e.end.toISOString());if(!t){console.log("âŒ No orders found"),U([]),_([]),q([]),G({revenue:0,orders:0,avgOrder:0,cashRevenue:0,qrisRevenue:0,transferRevenue:0,peakHour:"-",topTable:0}),I(!1);return}console.log(`âœ… Found ${t.length} orders`),U(t);let a=t.reduce((e,t)=>{let a=t.total||0;return"cancelled"===t.status?e-a:e+a},0),r=t.filter(e=>"cancelled"!==e.status).length,n=t.filter(e=>["cash","CASH"].includes(e.payment_method)),s=t.filter(e=>["qris","QRIS"].includes(e.payment_method)),i=t.filter(e=>["transfer","TRANSFER","bank_transfer","BANK_TRANSFER"].includes(e.payment_method)),l=n.reduce((e,t)=>"cancelled"===t.status?e-(t.total||0):e+(t.total||0),0),o=s.reduce((e,t)=>"cancelled"===t.status?e-(t.total||0):e+(t.total||0),0),c=i.reduce((e,t)=>"cancelled"===t.status?e-(t.total||0):e+(t.total||0),0),d=new Map;t.filter(e=>"cancelled"!==e.status).forEach(e=>{e.order_items?.forEach(e=>{let t=e.name||"Item",a=d.get(t)||{revenue:0,count:0};d.set(t,{revenue:a.revenue+e.price*e.quantity,count:a.count+e.quantity})})});let u=Array.from(d.entries()).map(([e,t])=>({name:e,...t})).sort((e,t)=>t.revenue-e.revenue).slice(0,10),m=new Map;t.filter(e=>"cancelled"!==e.status).forEach(e=>{if(e.tables&&e.tables.number){let t=e.tables.number,a=m.get(t)||{orders:0,revenue:0,customers:0};m.set(t,{orders:a.orders+1,revenue:a.revenue+(e.total||0),customers:a.customers+1})}});let p=Array.from(m.entries()).map(([e,t])=>({tableNumber:e,orders:t.orders,revenue:t.revenue,avgOrder:t.orders>0?t.revenue/t.orders:0,customers:t.customers})).sort((e,t)=>t.revenue-e.revenue),h=new Map;t.forEach(e=>{if(e.paid_at){let t=new Date(e.paid_at).getHours();h.set(t,(h.get(t)||0)+1)}});let x=Array.from(h.entries()).sort((e,t)=>t[1]-e[1])[0],f=x?`${x[0].toString().padStart(2,"0")}:00`:"-",y=p[0]?.tableNumber||0,v=[];if("daily"===M){let e=new Map;t.forEach(t=>{if(t.paid_at&&"cancelled"!==t.status){let a=new Date(t.paid_at).toLocaleDateString("id-ID",{day:"numeric",month:"short"});e.set(a,(e.get(a)||0)+(t.total||0))}}),e.forEach((e,t)=>{v.push({period:t,revenue:e,cogs:.3*e,margin:.7*e})})}else v.push({period:e.fullLabel,revenue:a,cogs:.3*a,margin:.7*a});Q(v.slice(-10));let g=[],b=t.filter(e=>e.discount&&e.discount>0&&"cancelled"!==e.status),j=new Map;b.forEach(e=>{let t=e.promo_code||"General Discount",a=j.get(t)||{revenue:0,discount:0};j.set(t,{revenue:a.revenue+(e.total||0),discount:a.discount+(e.discount||0)})}),j.forEach((e,t)=>{g.push({name:t,revenue:e.revenue+e.discount,discount:e.discount,netRevenue:e.revenue})});let N=a-g.reduce((e,t)=>e+t.netRevenue,0);N>0&&g.unshift({name:"No Promo",revenue:N,discount:0,netRevenue:N}),ee(g.slice(0,5));let k=[],w=t.filter(e=>"cancelled"===e.status),P=t.filter(e=>e.discount&&e.discount>0),E=t.filter(e=>e.refund_amount&&e.refund_amount>0);k.push({type:"Void Orders",count:w.length,amount:w.reduce((e,t)=>e+(t.total||0),0)}),k.push({type:"Discounts",count:P.length,amount:P.reduce((e,t)=>e+(t.discount||0),0)}),k.push({type:"Refunds",count:E.length,amount:E.reduce((e,t)=>e+(t.refund_amount||0),0)}),ea(k);let O=[];if("daily"===M){let e=new Map;t.forEach(t=>{if(t.paid_at&&"cancelled"!==t.status){let a=new Date(t.paid_at).toLocaleDateString("id-ID",{day:"numeric",month:"short"}),r="completed"===t.status?4.5+.5*Math.random():4,n=e.get(a)||{totalRating:0,count:0};e.set(a,{totalRating:n.totalRating+r,count:n.count+1})}}),e.forEach((e,t)=>{O.push({period:t,rating:Math.round(e.totalRating/e.count*10)/10,reviews:e.count})})}else{let a=4.5*(t.length>0);O.push({period:e.fullLabel,rating:Math.round(10*a)/10,reviews:t.length})}en(O.slice(-10)),G({revenue:a,orders:r,avgOrder:r>0?a/r:0,cashRevenue:l,qrisRevenue:o,transferRevenue:c,peakHour:f,topTable:y}),_(u),q(p),console.log("ðŸ“Š Analytics loaded:",{revenue:a,orders:r,topItemsCount:u.length,tablesCount:p.length,items:u.slice(0,3),tables:p.slice(0,3)})}catch(e){console.error("âŒ Error loading analytics:",e)}finally{I(!1)}}}(0,a.useEffect)(()=>{!async function(){let{data:{user:e}}=await A.auth.getUser();if(!e)return d.push("/login");let{data:t}=await A.from("restaurants").select("*").eq("owner_id",e.id);if(!t||0===t.length)return d.push("/dashboard");T(t);let a=localStorage.getItem("selected_restaurant_id");if(a){let e=t.find(e=>e.id===a);e?C(e):C(t[0])}else C(t[0])}()},[]),(0,a.useEffect)(()=>{let e=new Date,t=[],a=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"];if("daily"===M)for(let r=29;r>=0;r--){let n=new Date(e);n.setDate(e.getDate()-r);let s=new Date(n);s.setHours(0,0,0,0);let i=new Date(n);i.setHours(23,59,59,999),t.push({start:s,end:i,day:String(n.getDate()),month:a[n.getMonth()],fullLabel:`${n.getDate()} ${a[n.getMonth()]}`})}else if("weekly"===M)for(let r=11;r>=0;r--){let n=new Date(e);n.setDate(e.getDate()-7*r);let s=new Date(n);s.setDate(n.getDate()-6),s.setHours(0,0,0,0),n.setHours(23,59,59,999),t.push({start:s,end:n,day:`${s.getDate()}-${n.getDate()}`,month:a[n.getMonth()],fullLabel:`${s.getDate()}-${n.getDate()} ${a[n.getMonth()]}`})}else if("monthly"===M)for(let r=11;r>=0;r--){let n=new Date(e.getFullYear(),e.getMonth()-r,1);t.push({start:new Date(n.getFullYear(),n.getMonth(),1,0,0,0,0),end:new Date(n.getFullYear(),n.getMonth()+1,0,23,59,59,999),day:a[n.getMonth()],month:String(n.getFullYear()),fullLabel:`${a[n.getMonth()]} ${n.getFullYear()}`})}else for(let a=4;a>=0;a--){let r=e.getFullYear()-a;t.push({start:new Date(r,0,1,0,0,0,0),end:new Date(r,11,31,23,59,59,999),day:String(r),month:"",fullLabel:String(r)})}F(t),W(t.length-1),setTimeout(()=>{let e=document.getElementById("date-scroll");e&&(e.scrollLeft=e.scrollWidth)},100)},[M]),(0,a.useEffect)(()=>{console.log("ðŸ”„ Effect triggered:",{hasRestaurant:!!D,datesLength:B.length,selected:K}),D&&B.length>0&&es()},[D,B,K]);let ei=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return D&&0!==B.length?(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"en"===O?"Analytics":"Analitik"}),(0,t.jsx)("p",{className:"text-gray-600",children:"en"===O?"Performance & revenue summary":"Ringkasan performa & pendapatan"})]}),(0,t.jsxs)("button",{onClick:()=>J(!0),className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[(0,t.jsx)(u,{className:"w-5 h-5"}),"Export"]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-3",children:"en"===O?"PERIOD":"PERIODE"}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:["daily","weekly","monthly","yearly"].map(e=>(0,t.jsxs)("button",{onClick:()=>L(e),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${M===e?"bg-[var(--color-accent)] text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:["daily"===e&&("en"===O?"Daily":"Harian"),"weekly"===e&&("en"===O?"Weekly":"Mingguan"),"monthly"===e&&("en"===O?"Monthly":"Bulanan"),"yearly"===e&&("en"===O?"Yearly":"Tahunan")]},e))})]}),(0,t.jsxs)("div",{className:"mb-8 -mx-8",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-3 px-8",children:"daily"===M?"TANGGAL":"weekly"===M?"MINGGU":"monthly"===M?"BULAN":"TAHUN"}),(0,t.jsx)("div",{id:"date-scroll",className:"px-8 overflow-x-auto pb-2 scrollbar-hide snap-x snap-mandatory",style:{overscrollBehavior:"contain"},children:(0,t.jsx)("div",{className:"inline-flex gap-3",children:B.map((e,a)=>(0,t.jsx)("button",{onClick:()=>W(a),className:`px-3 py-3 rounded-lg transition-all whitespace-nowrap snap-start flex-shrink-0 text-sm ${K===a?"bg-[var(--color-accent)] text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"}`,children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:`font-bold ${K===a?"text-white":"text-gray-900"}`,children:e.day}),e.month&&(0,t.jsx)("div",{className:`text-xs ${K===a?"text-white":"text-gray-500"}`,children:e.month})]})},a))})})]}),S?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-accent)]"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-[var(--color-accent)] to-[var(--color-accent-hover)] rounded-2xl p-8 mb-8 text-white shadow-lg",children:[(0,t.jsx)("p",{className:"text-sm opacity-90 mb-2",children:B[K]?.fullLabel}),(0,t.jsx)("h2",{className:"text-4xl font-bold mb-4",children:ei($.revenue)}),(0,t.jsxs)("div",{className:"flex items-center gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:$.orders}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"en"===O?"Orders":"Pesanan"})]}),(0,t.jsx)("div",{className:"w-px h-12 bg-white/20"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:ei($.avgOrder)}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"en"===O?"Average":"Rata-rata"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"en"===O?"INSIGHTS":"INSIGHT"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-xl text-center",children:[(0,t.jsx)(l.Clock,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.peakHour}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Peak Hour":"Waktu Tersibuk"})]}),(0,t.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl text-center",children:[(0,t.jsx)(c.Building2,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.topTable>0?`${"en"===O?"Table":"Meja"} ${$.topTable}`:"-"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Top Table":"Meja Terlaris"})]}),(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-xl text-center",children:[(0,t.jsx)(i.DollarSign,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:ei($.avgOrder)}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Avg Order":"Rata-rata Pesanan"})]}),(0,t.jsxs)("div",{className:"p-4 bg-purple-50 rounded-xl text-center",children:[(0,t.jsx)(l.Clock,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(()=>{if(0===V.length)return 0;let e={};V.forEach(t=>{t.tables?.number&&t.paid_at&&(e[t.tables.number]=(e[t.tables.number]||0)+60)});let t=Object.keys(e).length;return 0===t?0:Math.round(Object.values(e).reduce((e,t)=>e+t,0)/t)})()," min"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Time Per Table":"Waktu Per Meja"})]}),(0,t.jsxs)("div",{className:"p-4 bg-pink-50 rounded-xl text-center",children:[(0,t.jsx)(m.Calendar,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(e=Object.entries(V.reduce((e,t)=>{if(t.paid_at){let a=new Date(t.paid_at).toLocaleDateString("id-ID",{weekday:"long"});e[a]=(e[a]||0)+1}return e},{})).sort(([,e],[,t])=>t-e)[0])?e[0]:"-"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Busiest Day":"Hari Tersibuk"})]}),(0,t.jsxs)("div",{className:"p-4 bg-orange-50 rounded-xl text-center",children:[(0,t.jsx)(p.TrendingUp,{className:"w-8 h-8 text-orange-600 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(()=>{let e=V.length;if(0===e)return"-";let t=Object.entries(V.reduce((e,t)=>{let a=t.payment_method?.toLowerCase();return a?.includes("qris")||a?.includes("qr")?e.qris++:a?.includes("cash")?e.cash++:(a?.includes("transfer")||a?.includes("bank"))&&e.transfer++,e},{qris:0,cash:0,transfer:0})).sort(([,e],[,t])=>t-e)[0];return t&&e>0?`${Math.round(t[1]/e*100)}%`:"-"})()}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"en"===O?"Most Popular":"Metode Terpopuler"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"en"===O?"PAYMENT METHODS":"METODE PEMBAYARAN"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-8 mb-6",children:[(0,t.jsxs)("div",{className:"relative w-48 h-48 flex-shrink-0",children:[(0,t.jsx)("svg",{viewBox:"0 0 200 200",className:"transform -rotate-90",children:(()=>{let e=$.cashRevenue+$.qrisRevenue+$.transferRevenue;if(0===e)return(0,t.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#E5E7EB",strokeWidth:"40"});let a=$.cashRevenue/e*100,r=$.qrisRevenue/e*100,n=$.transferRevenue/e*100,s=2*Math.PI*70,i=a/100*s,l=r/100*s;return(0,t.jsxs)(t.Fragment,{children:[a>0&&(0,t.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#10B981",strokeWidth:"40",strokeDasharray:`${i} ${s}`,strokeDashoffset:-0,className:"transition-all duration-300"}),r>0&&(0,t.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#3B82F6",strokeWidth:"40",strokeDasharray:`${l} ${s}`,strokeDashoffset:-(0+i),className:"transition-all duration-300"}),n>0&&(0,t.jsx)("circle",{cx:"100",cy:"100",r:"70",fill:"none",stroke:"#8B5CF6",strokeWidth:"40",strokeDasharray:`${n/100*s} ${s}`,strokeDashoffset:-(0+i+l),className:"transition-all duration-300"})]})})()}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.orders}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"en"===O?"Transactions":"Transaksi"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-3 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["ðŸ’µ ","en"===O?"Cash":"Tunai"]}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:$.revenue>0?`${($.cashRevenue/$.revenue*100).toFixed(1)}%`:"0%"})]})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:ei($.cashRevenue)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"ðŸ“± QRIS"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:$.revenue>0?`${($.qrisRevenue/$.revenue*100).toFixed(1)}%`:"0%"})]})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:ei($.qrisRevenue)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:"ðŸ¦ Transfer"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:$.revenue>0?`${($.transferRevenue/$.revenue*100).toFixed(1)}%`:"0%"})]})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:ei($.transferRevenue)})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"en"===O?"TOP SELLING ITEMS":"ITEM TERLARIS"}),0===z.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(o.UtensilsCrossed,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"en"===O?"No item data for this period":"Tidak ada data item untuk periode ini"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:z.map((e,a)=>(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl",children:(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-[var(--color-accent)] text-white rounded-full flex items-center justify-center text-xs font-bold",children:a+1}),(0,t.jsx)("p",{className:"font-semibold text-gray-900 line-clamp-1",children:e.name})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.count," ","en"===O?"sold":"terjual"]})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-[var(--color-accent)] ml-4",children:ei(e.revenue)})]})},a))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-sm border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"en"===O?"TABLE PERFORMANCE":"PERFORMA MEJA"}),0===H.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(c.Building2,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"en"===O?"No table data for this period":"Tidak ada data meja untuk periode ini"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H.map((e,a)=>(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl",children:(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-[var(--color-accent)] text-white rounded-full flex items-center justify-center text-xs font-bold",children:a+1}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["en"===O?"Table":"Meja"," ",e.tableNumber]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("span",{children:[e.customers," ","en"===O?"customers":"pelanggan"]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:[e.orders," ","en"===O?"orders":"pesanan"]})]})]}),(0,t.jsx)("p",{className:"text-lg font-bold text-[var(--color-accent)] ml-4",children:ei(e.revenue)})]})},e.tableNumber))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)(h.Percent,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"en"===O?"COGS & Gross Margin":"COGS & Margin Kotor"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"en"===O?"Cost of goods sold vs profit margin":"Harga pokok vs margin keuntungan"})]})]}),(0,t.jsx)("div",{className:"w-full h-80",children:(0,t.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(w.ComposedChart,{data:Z,children:[(0,t.jsx)(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(v.XAxis,{dataKey:"period",stroke:"#6b7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:60}),(0,t.jsx)(g.YAxis,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>`Rp ${(e/1e3).toFixed(0)}K`}),(0,t.jsx)(j.Tooltip,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:(e,t,a)=>{let r=a.dataKey;return"cogs"===r?[ei(Number(e)),"en"===O?"COGS (30%)":"HPP (30%)"]:"margin"===r?[ei(Number(e)),"en"===O?"Gross Margin (70%)":"Margin Kotor (70%)"]:"revenue"===r?[ei(Number(e)),"en"===O?"Revenue":"Pendapatan"]:[ei(Number(e)),t]}}),(0,t.jsx)(k.Legend,{}),(0,t.jsx)(P.Bar,{dataKey:"cogs",stackId:"a",fill:"#ef4444",name:"en"===O?"COGS":"HPP",radius:[0,0,0,0]}),(0,t.jsx)(P.Bar,{dataKey:"margin",stackId:"a",fill:"#10b981",name:"en"===O?"Gross Margin":"Margin Kotor",radius:[8,8,0,0]}),(0,t.jsx)(y.Line,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2,name:"en"===O?"Revenue":"Pendapatan",dot:{fill:"#3b82f6",r:4}})]})})}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-2 text-xs",children:[(0,t.jsx)("div",{className:"p-2 bg-red-50 rounded-lg text-center",children:(0,t.jsx)("p",{className:"text-red-700 font-semibold",children:"en"===O?"COGS: 30%":"HPP: 30%"})}),(0,t.jsx)("div",{className:"p-2 bg-green-50 rounded-lg text-center",children:(0,t.jsx)("p",{className:"text-green-700 font-semibold",children:"Margin: 70%"})}),(0,t.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg text-center",children:(0,t.jsx)("p",{className:"text-blue-700 font-semibold",children:"en"===O?"Revenue":"Pendapatan"})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)(x.Gift,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"en"===O?"Promo Performance":"Performa Promo"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"en"===O?"Revenue vs discount cost analysis":"Analisis pendapatan vs biaya diskon"})]})]}),(0,t.jsx)("div",{className:"w-full h-80",children:(0,t.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(E.BarChart,{data:X,children:[(0,t.jsx)(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(v.XAxis,{dataKey:"name",stroke:"#6b7280",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:80}),(0,t.jsx)(g.YAxis,{stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>`Rp ${(e/1e3).toFixed(0)}K`}),(0,t.jsx)(j.Tooltip,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:(e,t)=>"discount"===t?[ei(Number(e)),"en"===O?"Discount Given":"Diskon Diberikan"]:"netRevenue"===t?[ei(Number(e)),"en"===O?"Net Revenue":"Pendapatan Bersih"]:[ei(Number(e)),t]}),(0,t.jsx)(k.Legend,{}),(0,t.jsx)(P.Bar,{dataKey:"netRevenue",stackId:"a",fill:"#10b981",name:"en"===O?"Net Revenue":"Pendapatan Bersih",radius:[0,0,0,0]}),(0,t.jsx)(P.Bar,{dataKey:"discount",stackId:"a",fill:"#f59e0b",name:"en"===O?"Discount":"Diskon",radius:[8,8,0,0]})]})})}),(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-600",children:(0,t.jsxs)("p",{children:["ðŸ’¡ ","en"===O?"Compare discount costs vs incremental revenue to optimize promotions":"Bandingkan biaya diskon vs peningkatan pendapatan untuk optimasi promo"]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"en"===O?"Loss Analysis":"Analisis Kerugian"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"en"===O?"Voids, discounts, and refunds breakdown":"Rincian void, diskon, dan refund"})]})]}),(0,t.jsx)("div",{className:"w-full h-80",children:(0,t.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(E.BarChart,{data:et,children:[(0,t.jsx)(b.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,t.jsx)(v.XAxis,{dataKey:"type",stroke:"#6b7280",style:{fontSize:"12px"}}),(0,t.jsx)(g.YAxis,{yAxisId:"left",stroke:"#6b7280",style:{fontSize:"12px"}}),(0,t.jsx)(g.YAxis,{yAxisId:"right",orientation:"right",stroke:"#6b7280",style:{fontSize:"12px"},tickFormatter:e=>`Rp ${(e/1e3).toFixed(0)}K`}),(0,t.jsx)(j.Tooltip,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:(e,t)=>"amount"===t?[ei(Number(e)),"en"===O?"Total Amount":"Total Jumlah"]:[e,"en"===O?"Count":"Jumlah"]}),(0,t.jsx)(k.Legend,{}),(0,t.jsx)(P.Bar,{yAxisId:"left",dataKey:"count",fill:"#3b82f6",name:"en"===O?"Count":"Jumlah",radius:[8,8,0,0]}),(0,t.jsx)(y.Line,{yAxisId:"right",type:"monotone",dataKey:"amount",stroke:"#ef4444",strokeWidth:3,name:"en"===O?"Amount":"Jumlah",dot:{fill:"#ef4444",r:5}})]})})}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:et.map((e,a)=>(0,t.jsxs)("div",{className:`p-2 rounded-lg ${["bg-red-50 text-red-700","bg-amber-50 text-amber-700","bg-orange-50 text-orange-700"][a]}`,children:[(0,t.jsx)("p",{className:"text-xs font-medium",children:e.type}),(0,t.jsx)("p",{className:"text-sm font-bold",children:e.count}),(0,t.jsx)("p",{className:"text-xs",children:ei(e.amount)})]},a))})]}),!1]})]}),Y&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Export Data Analytics"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:["Unduh laporan analitik untuk periode ",(0,t.jsx)("span",{className:"font-semibold",children:B[K]?.fullLabel})," dalam format CSV."]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"Data yang akan di-export:"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,t.jsx)("li",{children:"âœ“ Ringkasan pendapatan & pesanan"}),(0,t.jsx)("li",{children:"âœ“ Breakdown metode pembayaran"}),(0,t.jsx)("li",{children:"âœ“ Item terlaris"}),(0,t.jsx)("li",{children:"âœ“ Performa meja"}),(0,t.jsx)("li",{children:"âœ“ Detail semua transaksi"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>J(!1),className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Batal"}),(0,t.jsxs)("button",{onClick:()=>{let e=B[K],t=new Blob([[["Analytics Report"],["Restaurant",D?.name||""],["Period",e?.fullLabel||""],["Generated",new Date().toLocaleString("id-ID")],[""],["Summary"],["Total Revenue",$.revenue],["Total Orders",$.orders],["Average Order",$.avgOrder],[""],["Payment Methods"],["Cash",$.cashRevenue,`${$.revenue>0?($.cashRevenue/$.revenue*100).toFixed(1):0}%`],["QRIS",$.qrisRevenue,`${$.revenue>0?($.qrisRevenue/$.revenue*100).toFixed(1):0}%`],["Transfer",$.transferRevenue,`${$.revenue>0?($.transferRevenue/$.revenue*100).toFixed(1):0}%`],[""],["Top Items"],["Rank","Item Name","Quantity Sold","Revenue"],...z.map((e,t)=>[t+1,e.name,e.count,e.revenue]),[""],["Table Performance"],["Rank","Table","Orders","Customers","Revenue","Avg Order"],...H.map((e,t)=>[t+1,`Meja ${e.tableNumber}`,e.orders,e.customers,e.revenue,e.avgOrder]),[""],["All Orders"],["Table","Total","Payment Method","Paid At","Items Count"],...V.map(e=>[e.tables?.number||"Takeaway",e.total||0,e.payment_method||"",e.paid_at?new Date(e.paid_at).toLocaleString("id-ID"):"",e.order_items?.length||0])].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=`analytics-${D?.name}-${e?.fullLabel}.csv`,a.click(),J(!1)},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),"Export CSV"]})]})]})})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-accent)]"})})}e.s(["default",()=>A],82831)}]);