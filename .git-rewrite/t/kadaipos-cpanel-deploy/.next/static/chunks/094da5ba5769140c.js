(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95468,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],95468)},7486,e=>{"use strict";let a=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],7486)},43432,e=>{"use strict";let a=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>a],43432)},63488,e=>{"use strict";let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],63488)},84614,e=>{"use strict";let a=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],84614)},63209,e=>{"use strict";let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},70756,e=>{"use strict";let a=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>a],70756)},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},94542,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(11795),l=e.i(86536),i=e.i(75254);let n=(0,i.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),o=(0,i.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var d=e.i(63209),c=e.i(95468),u=e.i(63488),m=e.i(70756),x=e.i(84614),h=e.i(43432),g=e.i(7486),b=e.i(22016);function p(){let e=(0,s.useRouter)(),i=(0,r.createClient)(),[p,f]=(0,t.useState)("login"),[y,j]=(0,t.useState)(!1),[v,k]=(0,t.useState)(""),[w,N]=(0,t.useState)(""),[F,A]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[M,E]=(0,t.useState)(!1),[P,T]=(0,t.useState)(""),[z,q]=(0,t.useState)(""),[L,V]=(0,t.useState)(""),[B,R]=(0,t.useState)(""),[_,D]=(0,t.useState)(!1),K=e=>{let a=e.trim();return a?!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)||a.includes("..")||a.startsWith(".")||a.endsWith(".")?{isValid:!1,error:"Format email tidak valid"}:a.length>254?{isValid:!1,error:"Email terlalu panjang"}:{isValid:!0,error:""}:{isValid:!1,error:"Email wajib diisi"}},Z=e=>{A(e);let a=K(e);D(a.isValid),R(a.error),k("")};(0,t.useEffect)(()=>{(async()=>{let{data:{session:a}}=await i.auth.getSession();a&&e.push("/dashboard")})()},[e,i]);let $=async a=>{a.preventDefault(),k(""),N("");let t=K(F);if(!t.isValid)return void k(t.error);if(!S)return void k("Password wajib diisi");j(!0);try{let{data:a,error:t}=await i.auth.signInWithPassword({email:F.trim(),password:S});if(t)return void(t.message.includes("Email not confirmed")?k("Email belum diverifikasi. Silakan cek email Anda dan klik link verifikasi."):t.message.includes("Invalid login credentials")?k("Email atau password salah"):k(t.message));a.session&&(e.push("/dashboard"),e.refresh())}catch(e){k(e.message||"Terjadi kesalahan saat login")}finally{j(!1)}},U=async a=>{if(a.preventDefault(),k(""),N(""),!P||!z||!L)return void k("Semua field wajib diisi");let t=K(F);if(!t.isValid)return void k(t.error);if(S.length<6)return void k("Password minimal 6 karakter");j(!0);try{let{data:a,error:t}=await i.auth.signUp({email:F.trim(),password:S,options:{data:{full_name:P,restaurant_name:z,phone:L}}});if(t)return void(t.message?.toLowerCase().includes("rate limit")?k("Terlalu banyak percobaan. Silakan tunggu beberapa menit."):t.message?.toLowerCase().includes("already")?k("Email sudah terdaftar. Silakan login atau gunakan email lain."):k(t.message));if(!a.user)return void k("Gagal membuat akun. Silakan coba lagi.");await new Promise(e=>setTimeout(e,1e3));let{error:s}=await i.from("user_profiles").upsert({id:a.user.id,email:F.trim(),full_name:P,restaurant_name:z,phone:L||"",onboarding_completed:!1});s&&console.error("Profile creation error:",s);let{error:r}=await i.from("restaurants").insert({name:z,owner_id:a.user.id,address:"",phone:L||""});r&&console.error("Restaurant creation error:",r),a.session?(N("Registrasi berhasil! Mengalihkan ke dashboard..."),setTimeout(()=>{e.push("/dashboard"),e.refresh()},1e3)):(N("Registrasi berhasil! Silakan cek email Anda untuk verifikasi."),f("login"))}catch(e){k(e.message||"Terjadi kesalahan saat registrasi")}finally{j(!1)}},O=async e=>{e.preventDefault(),k(""),N("");let a=K(F);if(!a.isValid)return void k(a.error);j(!0);try{let{error:e}=await i.auth.resetPasswordForEmail(F.trim(),{redirectTo:`${window.location.origin}/auth/reset-password`});if(e)return void(e.message.includes("rate limit")?k("Terlalu banyak percobaan. Silakan coba lagi nanti."):k(e.message));N(`Link reset password telah dikirim ke ${F.trim()}. Silakan cek email Anda.`)}catch(e){k(e.message||"Terjadi kesalahan")}finally{j(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#FF5A5F]/5 via-white to-[#8B5CF6]/5 flex items-center justify-center p-4 pt-24",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-[#FF5A5F]/10 rounded-full blur-3xl"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-[#8B5CF6]/10 rounded-full blur-3xl"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(b.default,{href:"/",className:"inline-block",children:(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FF5A5F] to-[#8B5CF6] bg-clip-text text-transparent",children:"KadaiPOS"})}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["login"===p&&"Selamat datang kembali","signup"===p&&"Mulai kelola bisnis Anda","forgot-password"===p&&"Reset password Anda"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-gray-100",children:[v&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[(0,a.jsx)(d.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-red-800",children:v})]}),w&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-start gap-3",children:[(0,a.jsx)(c.CheckCircle2,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,a.jsx)("p",{className:"text-sm text-green-800",children:w})]}),"login"===p&&(0,a.jsxs)("form",{onSubmit:$,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",value:F,onChange:e=>Z(e.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${B?"border-red-300 focus:ring-red-500":_?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),B&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:B})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:M?"text":"password",value:S,onChange:e=>{C(e.target.value),k("")},className:"w-full pl-12 pr-12 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>E(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:M?(0,a.jsx)(n,{className:"w-5 h-5"}):(0,a.jsx)(l.Eye,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("button",{type:"button",onClick:()=>f("forgot-password"),className:"text-sm text-[#FF5A5F] hover:text-[#FF5A5F]/80 font-medium",children:"Lupa password?"})}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"w-5 h-5 animate-spin"}),"Memproses..."]}):"Masuk"}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"atau"})})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>f("signup"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Belum punya akun? ",(0,a.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Daftar sekarang"})]})]}),"signup"===p&&(0,a.jsxs)("form",{onSubmit:U,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nama Lengkap"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:P,onChange:e=>{T(e.target.value),k("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"John Doe",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nama Bisnis"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Building2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:z,onChange:e=>{q(e.target.value),k("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"Nama Restoran/Toko Anda",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",value:F,onChange:e=>Z(e.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${B?"border-red-300 focus:ring-red-500":_?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),B&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:B})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"No. Telepon"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"tel",value:L,onChange:e=>{V(e.target.value),k("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"+62 812-3456-7890",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:M?"text":"password",value:S,onChange:e=>{C(e.target.value),k("")},className:"w-full pl-12 pr-12 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"Min. 6 karakter",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>E(!M),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:M?(0,a.jsx)(n,{className:"w-5 h-5"}):(0,a.jsx)(l.Eye,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:(0,a.jsx)("p",{className:"text-xs text-blue-800",children:"ðŸ“ Dengan mendaftar, Anda dapat mencoba fitur KadaiPOS dan mengelola bisnis Anda."})}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"w-5 h-5 animate-spin"}),"Mendaftar..."]}):"Daftar Sekarang"}),(0,a.jsxs)("button",{type:"button",onClick:()=>f("login"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Sudah punya akun? ",(0,a.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Masuk"})]})]}),"forgot-password"===p&&(0,a.jsxs)("form",{onSubmit:O,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"email",value:F,onChange:e=>Z(e.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${B?"border-red-300 focus:ring-red-500":_?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),B&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:B})]}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"w-5 h-5 animate-spin"}),"Mengirim..."]}):"Kirim Link Reset"}),(0,a.jsxs)("button",{type:"button",onClick:()=>f("login"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Kembali ke ",(0,a.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Login"})]})]})]}),(0,a.jsx)("div",{className:"mt-8 text-center text-sm text-gray-500",children:(0,a.jsx)(b.default,{href:"/",className:"hover:text-[#FF5A5F] transition-colors",children:"â† Kembali ke Homepage"})})]})]})}e.s(["default",()=>p],94542)}]);