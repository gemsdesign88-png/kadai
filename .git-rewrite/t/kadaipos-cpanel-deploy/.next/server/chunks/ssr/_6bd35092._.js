module.exports=[210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},10448,a=>{"use strict";let b=(0,a.i(70106).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>b],10448)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},15489,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95445),f=a.i(15618),g=a.i(10448),h=a.i(81560),i=a.i(23237),j=a.i(60246),k=a.i(210);function l(){let a=(0,d.useRouter)(),l=(0,e.createClient)(),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({number:"",capacity:""});async function C(){n(!0);try{let{data:{user:b}}=await l.auth.getUser();if(!b)return void a.push("/login");let c=localStorage.getItem("selected_restaurant_id");if(!c)return void a.push("/dashboard");let{data:d}=await l.from("restaurants").select("*").eq("id",c).eq("owner_id",b.id).single();if(!d)return;v(d);let{data:e}=await l.from("tables").select("*").eq("restaurant_id",d.id).order("number");e&&p(e)}catch(a){console.error("Error loading tables:",a)}finally{n(!1)}}function D(a=null){a?(t(a),B({number:a.number||"",capacity:a.capacity?.toString()||""})):(t(null),B({number:"",capacity:""})),r(!0)}async function E(a){if(a.preventDefault(),!u)return;let b={number:A.number,capacity:parseInt(A.capacity),restaurant_id:u.id};s||(b.barcode=`TABLE-${A.number}-${Math.random().toString(36).substring(2,10).toUpperCase()}`);try{s?await l.from("tables").update(b).eq("id",s.id):await l.from("tables").insert(b),r(!1),C()}catch(a){console.error("Error saving table:",a)}}async function F(a){if(confirm("Hapus meja ini?"))try{await l.from("tables").delete().eq("id",a),C()}catch(a){console.error("Error deleting table:",a)}}async function G(a){let b=a;if(!a.barcode){let c=`TABLE-${a.number}-${Math.random().toString(36).substring(2,10).toUpperCase()}`,{error:d}=await l.from("tables").update({barcode:c}).eq("id",a.id);d||(b={...a,barcode:c},p(c=>c.map(c=>c.id===a.id?b:c)))}z(b),x(!0)}(0,c.useEffect)(()=>{C()},[]);let H=o.filter(a=>!a.status||"available"===a.status).length,I=o.filter(a=>a.status&&"available"!==a.status).length;return m?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-accent)]"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.push("/dashboard/tables"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(k.ArrowLeft,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kelola Meja"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Atur tata letak dan status meja"})]})]}),(0,b.jsxs)("button",{onClick:()=>D(),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-accent)] text-white rounded-lg font-medium hover:bg-[var(--color-accent-hover)] transition-colors",children:[(0,b.jsx)(f.Plus,{className:"w-5 h-5"}),"Tambah Meja"]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:o.length}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Total Meja"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-3xl font-bold text-green-600 mb-1",children:H}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Tersedia"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-3xl font-bold text-red-600 mb-1",children:I}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Terisi"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:0===o.length?(0,b.jsx)("div",{className:"col-span-full bg-white rounded-2xl p-12 text-center border border-gray-100",children:(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"Belum ada meja"})}):o.map(a=>{let c=a.status&&"available"!==a.status;return(0,b.jsxs)("div",{className:`bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-all ${c?"border-2 border-green-200 bg-green-50":"border border-gray-200"}`,children:[(0,b.jsxs)("div",{className:"p-6 text-center",children:[(0,b.jsx)("div",{className:`w-14 h-14 mx-auto rounded-full flex items-center justify-center mb-3 border-2 ${c?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200"}`,children:(0,b.jsx)(j.Users,{className:`w-8 h-8 ${c?"text-green-500":"text-[#FF5A5F]"}`})}),(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Meja ",a.number]}),c&&(0,b.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 mb-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,b.jsx)("span",{className:"text-xs font-semibold text-green-700",children:"Terisi"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1.5 text-gray-600",children:[(0,b.jsx)(j.Users,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.capacity," orang"]})]})]}),(0,b.jsxs)("div",{className:"flex border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:()=>G(a),className:"flex-1 flex items-center justify-center py-3 hover:bg-gray-50 transition-colors border-r border-gray-100",title:"Lihat QR Code",children:(0,b.jsx)(i.QrCode,{className:"w-4 h-4 text-[#FF5A5F]"})}),(0,b.jsx)("button",{onClick:()=>D(a),className:"flex-1 flex items-center justify-center py-3 hover:bg-gray-50 transition-colors border-r border-gray-100",title:"Edit Meja",children:(0,b.jsx)(g.Edit2,{className:"w-4 h-4 text-gray-600"})}),(0,b.jsx)("button",{onClick:()=>F(a.id),className:"flex-1 flex items-center justify-center py-3 hover:bg-gray-50 transition-colors",title:"Hapus Meja",children:(0,b.jsx)(h.Trash2,{className:"w-4 h-4 text-red-500"})})]})]},a.id)})})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-6",children:s?"Edit Meja":"Tambah Meja"}),(0,b.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nomor Meja"}),(0,b.jsx)("input",{type:"text",required:!0,value:A.number,onChange:a=>B({...A,number:a.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-accent)]",placeholder:"Contoh: A1, B2, VIP-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kapasitas (Kursi)"}),(0,b.jsx)("input",{type:"number",min:"1",required:!0,value:A.capacity,onChange:a=>B({...A,capacity:a.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--color-accent)]"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-2 border border-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Batal"}),(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-[#FF5A5F] text-white rounded-lg font-medium hover:bg-[#FF5A5F]/90 transition-colors",children:s?"Simpan":"Tambah"})]})]})]})}),w&&y&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-900 text-center mb-6",children:["QR Code - Meja ",y.number]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl mb-6",children:[(0,b.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm mx-auto w-fit",children:(0,b.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`https://order.kadaipos.id/${y.barcode||y.id}`)}`,alt:"QR Code",className:"w-52 h-52"})}),(0,b.jsxs)("div",{className:"mt-4 text-center space-y-2",children:[(0,b.jsx)("button",{onClick:()=>{let a=`https://order.kadaipos.id/${y.barcode||y.id}`;window.open(a,"_blank")},className:"text-[#FF5A5F] font-semibold text-sm hover:underline",children:"Buka tautan pelanggan"}),(0,b.jsx)("button",{onClick:()=>{let a=`https://order.kadaipos.id/${y.barcode||y.id}`;navigator.clipboard.writeText(a),alert("Link berhasil disalin!")},className:"block w-full text-gray-900 font-semibold text-sm hover:underline",children:"Salin tautan"})]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 text-center mb-6 leading-relaxed",children:"Pelanggan bisa scan QR code ini dengan kamera smartphone mereka untuk memesan langsung di meja"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors",children:"Tutup"}),(0,b.jsx)("button",{onClick:()=>{let a=`https://order.kadaipos.id/${y.barcode||y.id}`;navigator.share?navigator.share({title:`QR Code Meja ${y.number}`,text:`Pesan di Meja ${y.number}`,url:a}):(navigator.clipboard.writeText(a),alert("Link berhasil disalin!"))},className:"flex-1 px-4 py-3 bg-[#FF5A5F] text-white rounded-xl font-semibold hover:bg-[#FF5A5F]/90 transition-colors",children:"Bagikan"})]})]})})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_6bd35092._.js.map