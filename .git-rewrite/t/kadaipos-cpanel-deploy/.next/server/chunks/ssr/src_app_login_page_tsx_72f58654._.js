module.exports=[93482,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(95445),f=a.i(77156),g=a.i(70106);let h=(0,g.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),i=(0,g.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var j=a.i(92e3),k=a.i(67453),l=a.i(92258),m=a.i(43108),n=a.i(46842),o=a.i(63519),p=a.i(67900),q=a.i(38246);function r(){let a=(0,d.useRouter)(),g=(0,e.createClient)(),[r,s]=(0,c.useState)("login"),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(!1),P=a=>{let b=a.trim();return b?!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(b)||b.includes("..")||b.startsWith(".")||b.endsWith(".")?{isValid:!1,error:"Format email tidak valid"}:b.length>254?{isValid:!1,error:"Email terlalu panjang"}:{isValid:!0,error:""}:{isValid:!1,error:"Email wajib diisi"}},Q=a=>{A(a);let b=P(a);O(b.isValid),M(b.error),w("")};(0,c.useEffect)(()=>{(async()=>{let{data:{session:b}}=await g.auth.getSession();b&&a.push("/dashboard")})()},[a,g]);let R=async b=>{b.preventDefault(),w(""),y("");let c=P(z);if(!c.isValid)return void w(c.error);if(!B)return void w("Password wajib diisi");u(!0);try{let{data:b,error:c}=await g.auth.signInWithPassword({email:z.trim(),password:B});if(c)return void(c.message.includes("Email not confirmed")?w("Email belum diverifikasi. Silakan cek email Anda dan klik link verifikasi."):c.message.includes("Invalid login credentials")?w("Email atau password salah"):w(c.message));b.session&&(a.push("/dashboard"),a.refresh())}catch(a){w(a.message||"Terjadi kesalahan saat login")}finally{u(!1)}},S=async b=>{if(b.preventDefault(),w(""),y(""),!F||!H||!J)return void w("Semua field wajib diisi");let c=P(z);if(!c.isValid)return void w(c.error);if(B.length<6)return void w("Password minimal 6 karakter");u(!0);try{let{data:b,error:c}=await g.auth.signUp({email:z.trim(),password:B,options:{data:{full_name:F,restaurant_name:H,phone:J}}});if(c)return void(c.message?.toLowerCase().includes("rate limit")?w("Terlalu banyak percobaan. Silakan tunggu beberapa menit."):c.message?.toLowerCase().includes("already")?w("Email sudah terdaftar. Silakan login atau gunakan email lain."):w(c.message));if(!b.user)return void w("Gagal membuat akun. Silakan coba lagi.");await new Promise(a=>setTimeout(a,1e3));let{error:d}=await g.from("user_profiles").upsert({id:b.user.id,email:z.trim(),full_name:F,restaurant_name:H,phone:J||"",onboarding_completed:!1});d&&console.error("Profile creation error:",d);let{error:e}=await g.from("restaurants").insert({name:H,owner_id:b.user.id,address:"",phone:J||""});e&&console.error("Restaurant creation error:",e),b.session?(y("Registrasi berhasil! Mengalihkan ke dashboard..."),setTimeout(()=>{a.push("/dashboard"),a.refresh()},1e3)):(y("Registrasi berhasil! Silakan cek email Anda untuk verifikasi."),s("login"))}catch(a){w(a.message||"Terjadi kesalahan saat registrasi")}finally{u(!1)}},T=async a=>{a.preventDefault(),w(""),y("");let b=P(z);if(!b.isValid)return void w(b.error);u(!0);try{let{error:a}=await g.auth.resetPasswordForEmail(z.trim(),{redirectTo:`${window.location.origin}/auth/reset-password`});if(a)return void(a.message.includes("rate limit")?w("Terlalu banyak percobaan. Silakan coba lagi nanti."):w(a.message));y(`Link reset password telah dikirim ke ${z.trim()}. Silakan cek email Anda.`)}catch(a){w(a.message||"Terjadi kesalahan")}finally{u(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-[#FF5A5F]/5 via-white to-[#8B5CF6]/5 flex items-center justify-center p-4 pt-24",children:[(0,b.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,b.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-[#FF5A5F]/10 rounded-full blur-3xl"}),(0,b.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-[#8B5CF6]/10 rounded-full blur-3xl"})]}),(0,b.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)(q.default,{href:"/",className:"inline-block",children:(0,b.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-[#FF5A5F] to-[#8B5CF6] bg-clip-text text-transparent",children:"KadaiPOS"})}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:["login"===r&&"Selamat datang kembali","signup"===r&&"Mulai kelola bisnis Anda","forgot-password"===r&&"Reset password Anda"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-gray-100",children:[v&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-red-800",children:v})]}),x&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-start gap-3",children:[(0,b.jsx)(k.CheckCircle2,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-green-800",children:x})]}),"login"===r&&(0,b.jsxs)("form",{onSubmit:R,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"email",value:z,onChange:a=>Q(a.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${L?"border-red-300 focus:ring-red-500":N?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),L&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:L})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:D?"text":"password",value:B,onChange:a=>{C(a.target.value),w("")},className:"w-full pl-12 pr-12 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>E(!D),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:D?(0,b.jsx)(h,{className:"w-5 h-5"}):(0,b.jsx)(f.Eye,{className:"w-5 h-5"})})]})]}),(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsx)("button",{type:"button",onClick:()=>s("forgot-password"),className:"text-sm text-[#FF5A5F] hover:text-[#FF5A5F]/80 font-medium",children:"Lupa password?"})}),(0,b.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i,{className:"w-5 h-5 animate-spin"}),"Memproses..."]}):"Masuk"}),(0,b.jsxs)("div",{className:"relative my-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,b.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,b.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,b.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"atau"})})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>s("signup"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Belum punya akun? ",(0,b.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Daftar sekarang"})]})]}),"signup"===r&&(0,b.jsxs)("form",{onSubmit:S,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nama Lengkap"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:F,onChange:a=>{G(a.target.value),w("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"John Doe",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nama Bisnis"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.Building2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:H,onChange:a=>{I(a.target.value),w("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"Nama Restoran/Toko Anda",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"email",value:z,onChange:a=>Q(a.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${L?"border-red-300 focus:ring-red-500":N?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),L&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:L})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"No. Telepon"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(o.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"tel",value:J,onChange:a=>{K(a.target.value),w("")},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"+62 812-3456-7890",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:D?"text":"password",value:B,onChange:a=>{C(a.target.value),w("")},className:"w-full pl-12 pr-12 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF5A5F] transition-all",placeholder:"Min. 6 karakter",required:!0}),(0,b.jsx)("button",{type:"button",onClick:()=>E(!D),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:D?(0,b.jsx)(h,{className:"w-5 h-5"}):(0,b.jsx)(f.Eye,{className:"w-5 h-5"})})]})]}),(0,b.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:(0,b.jsx)("p",{className:"text-xs text-blue-800",children:"ðŸ“ Dengan mendaftar, Anda dapat mencoba fitur KadaiPOS dan mengelola bisnis Anda."})}),(0,b.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i,{className:"w-5 h-5 animate-spin"}),"Mendaftar..."]}):"Daftar Sekarang"}),(0,b.jsxs)("button",{type:"button",onClick:()=>s("login"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Sudah punya akun? ",(0,b.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Masuk"})]})]}),"forgot-password"===r&&(0,b.jsxs)("form",{onSubmit:T,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"email",value:z,onChange:a=>Q(a.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border ${L?"border-red-300 focus:ring-red-500":N?"border-green-300 focus:ring-green-500":"border-gray-300 focus:ring-[#FF5A5F]"} focus:outline-none focus:ring-2 transition-all`,placeholder:"nama@email.com",required:!0})]}),L&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1 ml-1",children:L})]}),(0,b.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-[#FF5A5F] to-[#FF5A5F]/90 text-white py-3.5 rounded-xl font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i,{className:"w-5 h-5 animate-spin"}),"Mengirim..."]}):"Kirim Link Reset"}),(0,b.jsxs)("button",{type:"button",onClick:()=>s("login"),className:"w-full text-center text-sm text-gray-600 hover:text-gray-900",children:["Kembali ke ",(0,b.jsx)("span",{className:"text-[#FF5A5F] font-semibold",children:"Login"})]})]})]}),(0,b.jsx)("div",{className:"mt-8 text-center text-sm text-gray-500",children:(0,b.jsx)(q.default,{href:"/",className:"hover:text-[#FF5A5F] transition-colors",children:"â† Kembali ke Homepage"})})]})]})}a.s(["default",()=>r],93482)}];

//# sourceMappingURL=src_app_login_page_tsx_72f58654._.js.map